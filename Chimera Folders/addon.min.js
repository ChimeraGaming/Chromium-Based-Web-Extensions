!function(){"use strict";let e="streamio_folders";function t(){return JSON.parse(localStorage.getItem(e))||[]}function n(t){localStorage.setItem(e,JSON.stringify(t))}function o(e){let t=document.getElementById("toast-message");t||((t=document.createElement("div")).id="toast-message",Object.assign(t.style,{position:"fixed",bottom:"30px",left:"50%",transform:"translateX(-50%)",background:"#5A1F9A",color:"#fff",padding:"12px 30px",fontSize:"16px",borderRadius:"8px",zIndex:"10002",opacity:"0",transition:"opacity 0.5s"}),document.body.appendChild(t)),t.textContent=e,t.style.opacity="1",setTimeout(()=>{t.style.opacity="0"},2500)}let i=document.createElement("div");i.id="folder-sidebar",i.innerHTML=`
      <div id="sidebar-top" style="display: flex; align-items: center; gap: 8px; margin-bottom: 15px;">
        <button id="home-button" class="fancy-btn">Home</button>
        <button id="add-button" class="fancy-btn">Add</button>
        <button id="github-button" class="fancy-btn" style="padding: 6px 8px;">
          <img src="https://cdn-icons-png.flaticon.com/512/25/25231.png" style="width:20px; height:20px;">
        </button>
        <button id="minimize-button" class="fancy-btn">📌</button>
      </div>
      <div id="sidebar-content">
        <h3 style="margin: 0; color: #fff;">My Folders</h3>
        <div id="folder-controls" style="margin-top: 10px;">
          <input id="folder-name" type="text" placeholder="New folder..." style="width: 100%; margin-bottom: 8px; padding: 6px; background: #333; border: 1px solid #555; color: #fff; border-radius: 6px;">
          <button id="create-folder" class="create-folder-btn">Create Folder</button>
        </div>
        <ul id="folder-list" style="margin-top: 15px; list-style: none; padding: 0;"></ul>
      </div>
    `,Object.assign(i.style,{position:"fixed",top:"70px",left:"0",width:"260px",height:"90%",background:"#1c1c1c",borderRight:"2px solid #333",padding:"15px",zIndex:"10000",overflowY:"auto",boxShadow:"3px 0 10px rgba(0,0,0,0.5)",fontFamily:"Arial, sans-serif",borderRadius:"0 10px 10px 0",transition:"transform 0.3s"}),document.body.appendChild(i);let l=document.createElement("style");function r(){let e=document.getElementById("folder-list");e.innerHTML="";let o=t();o.forEach(t=>{let i=document.createElement("li");i.style.marginBottom="8px";let l=document.createElement("div");l.style.display="flex",l.style.justifyContent="space-between",l.style.alignItems="center",l.style.background="#333",l.style.color="#fff",l.style.padding="5px",l.style.borderRadius="5px";let d=document.createElement("div");d.style.display="flex",d.style.alignItems="center",d.style.gap="5px";let a=document.createElement("span");a.classList.add("chevron"),a.innerHTML="▶";let s=document.createElement("span");s.textContent=t.name,d.appendChild(a),d.appendChild(s);let p=document.createElement("button");p.textContent="❌",p.style.background="transparent",p.style.border="none",p.style.color="red",p.style.cursor="pointer",p.onclick=()=>{if(confirm(`Delete folder "${t.name}"?`)){let e=o.filter(e=>e.id!==t.id);n(e),r()}},l.appendChild(d),l.appendChild(p),i.appendChild(l);let c=document.createElement("ul");c.style.marginLeft="15px",c.style.marginTop="5px",t.items&&t.items.length>0&&t.items.forEach(e=>{let i=document.createElement("li");i.style.display="flex",i.style.justifyContent="space-between",i.style.alignItems="center",i.style.marginBottom="4px";let l=document.createElement("a");l.textContent=e.title,l.href=e.url,l.style.color="#00bfff",l.style.textDecoration="none",l.style.fontSize="14px",l.target="_blank";let d=document.createElement("button");d.textContent="➖",d.style.background="transparent",d.style.border="none",d.style.color="#fff",d.style.cursor="pointer",d.onclick=()=>{confirm(`Remove "${e.title}" from "${t.name}"?`)&&(t.items=t.items.filter(t=>t.url!==e.url),n(o),r())},i.appendChild(l),i.appendChild(d),c.appendChild(i)}),i.appendChild(c),a.onclick=()=>{c.style.display="none"===c.style.display?"block":"none",a.classList.toggle("collapsed")},e.appendChild(i)})}l.innerHTML=`
      .fancy-btn {
        background: linear-gradient(to bottom, #7b61ff, #0040ff);
        border: none;
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        color: white;
        font-weight: bold;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .fancy-btn:hover {
        background: linear-gradient(to bottom, #8b71ff, #0050ff);
        transform: scale(1.05);
        box-shadow: 0 0 8px #7b61ff;
      }
      .create-folder-btn {
        width: 100%;
        padding: 8px;
        border-radius: 8px;
        background: linear-gradient(to bottom, #7b61ff, #0040ff);
        color: white;
        font-weight: bold;
        border: none;
      }
      .create-folder-btn:hover {
        background: linear-gradient(to bottom, #8b71ff, #0050ff);
      }
      #folder-sidebar.minimized {
        transform: translateX(-240px);
      }
      #folder-sidebar.minimized:hover {
        transform: translateX(0);
      }
      .chevron {
        cursor: pointer;
        transition: transform 0.3s ease;
        color: white;
      }
      .chevron.collapsed {
        transform: rotate(-90deg);
      }
    `,document.head.appendChild(l),document.getElementById("home-button").onclick=()=>{window.location.href="https://web.stremio.com/"},document.getElementById("add-button").onclick=()=>{let e=t(),i=document.querySelector("img.logo-X3hTV");if(!i){o("No show selected!");return}let l=i.getAttribute("title")||"Untitled",d=window.location.hash,a=document.createElement("div");Object.assign(a.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"10001"});let s=document.createElement("div");s.style.background="#222",s.style.padding="20px",s.style.borderRadius="10px",s.style.minWidth="300px",s.style.color="#fff",s.innerHTML="<h3>Select Folder</h3>",e.forEach(t=>{let i=document.createElement("button");i.textContent=t.name,Object.assign(i.style,{display:"block",margin:"10px 0",width:"100%",padding:"10px",background:"#7b61ff",color:"#fff",border:"none",borderRadius:"5px",fontSize:"16px",cursor:"pointer",fontWeight:"bold"}),i.onclick=()=>{let i=t.items.some(e=>e.url===d);i?o(`Already in "${t.name}"`):(t.items.push({title:l,url:d}),n(e),o(`Added to "${t.name}"`)),a.remove(),r()},s.appendChild(i)});let p=document.createElement("button");p.textContent="Cancel",Object.assign(p.style,{marginTop:"10px",padding:"10px",width:"100%",background:"#d9534f",border:"none",borderRadius:"5px",fontSize:"16px",cursor:"pointer",color:"white",fontWeight:"bold"}),p.onclick=()=>a.remove(),s.appendChild(p),a.appendChild(s),document.body.appendChild(a)},document.getElementById("github-button").onclick=()=>{window.open("https://github.com/ChimeraGaming/Stremio-Addons","_blank")},document.getElementById("minimize-button").onclick=()=>{i.classList.toggle("minimized")},r()}();